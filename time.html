<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Loading...</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap');
    html, body {
        margin: 0; height: 100%; overflow: hidden;
        background: #000;
        font-family: 'Poppins', sans-serif;
        color: #fff; text-align: center;
    }

    #countdown {
        font-size: clamp(3rem, 14vw, 10rem);
        font-weight: 700;
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        text-shadow: 0 0 30px cyan, 0 0 60px aqua;
        width: 100%;
        text-align: center;
        line-height: 1.1;
        z-index: 10;
    }

    canvas {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: -1;
    }

    #testBtn {
        position: fixed;
        bottom: 10px; right: 10px;
        padding: 10px 14px;
        border-radius: 8px;
        font-size: 0.8rem;
        cursor: pointer;
        border: none;
        opacity: .5;
        backdrop-filter: blur(4px);
    }
</style>
</head>
<body>

<canvas id="bg"></canvas>
<div id="countdown">--:--:--</div>
<button id="testBtn">ğŸ”” ì•Œë¦¼ í…ŒìŠ¤íŠ¸</button>

<script>
// ===== ì•Œë¦¼ ì„¤ì • ===== //
document.getElementById("testBtn").onclick = () => {
    if ("Notification" in window) {
        Notification.requestPermission().then(p => {
            if (p === "granted") new Notification("ì•Œë¦¼ ì‘ë™ í…ŒìŠ¤íŠ¸ ì„±ê³µ!");
        });
    }
};

// ===== ì¹´ìš´íŠ¸ë‹¤ìš´ ===== //
const target = new Date();
target.setHours(17, 20, 0, 0);
let lastNoti = -1;

function updateCountdown() {
    const now = new Date();
    let diff = target - now;
    if (diff < 0) diff = 0;

    const h = Math.floor(diff / 3600000);
    const m = Math.floor((diff % 3600000) / 60000);
    const s = Math.floor((diff % 60000) / 1000);

    const txt = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    document.getElementById("countdown").textContent = txt;
    document.title = txt;

    const mins = Math.floor(diff / 60000);
    if (mins % 5 === 0 && mins !== lastNoti && mins !== 0) {
        if ("Notification" in window && Notification.permission === "granted") {
            new Notification(`${mins}ë¶„ ë‚¨ì•˜ì–´ìš” â³`);
        }
        lastNoti = mins;
    }
}
setInterval(updateCountdown, 1000);
updateCountdown();

// ===== ë°°ê²½ íŒŒí‹°í´ ===== //
const canvas = document.getElementById("bg");
const ctx = canvas.getContext("2d");
let particles = [];

function resize() {
    const ratio = window.devicePixelRatio || 1;
    canvas.width = innerWidth * ratio;
    canvas.height = innerHeight * ratio;
    ctx.scale(ratio, ratio);

    particles = [...Array(200)].map(() => ({
        x: Math.random() * innerWidth,
        y: Math.random() * innerHeight,
        size: Math.random() * 3 + 1,
        speed: Math.random() * 0.6 + 0.3
    }));
}
resize();
window.addEventListener("resize", resize);

function animate() {
    ctx.clearRect(0,0,innerWidth,innerHeight);
    ctx.fillStyle = "rgba(0,255,255,0.9)";
    particles.forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
        ctx.shadowBlur = 20;
        ctx.shadowColor = "#00eaff";
        ctx.fill();
        p.y -= p.speed;
        if (p.y < 0) p.y = innerHeight;
    });
    requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
